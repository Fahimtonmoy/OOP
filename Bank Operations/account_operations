from bank_acc import *
import pickle

fahim = BankAccount(1000, 'fahim')   
muhtasim = BankAccount(1000, 'muhtasim')
hossain = BankAccount(1000, 'hossain')             

fahim.deposit(1000)
muhtasim.deposit(500)
hossain.deposit(2050)
hossain.money_transfer(1000, muhtasim)
fahim.money_transfer(2010, hossain)


def save_object(file, objs):
    with open(file, 'wb') as f:
        for obj in objs:
            pickle.dump(obj, f)
        f.close()
        

def load_object(file):
    objs = []
    with open(file, 'rb') as f:
        while True:
            try:
                obj = pickle.load(f)
                objs.append(obj)
            except EOFError:
                break
        f.close()
        return objs

filename = 'objects.pkl'
save_object(filename, [fahim, muhtasim, hossain])


objects = load_object('objects.pkl')

def object_info(obj):
    print("#" * 20)
    for index, x in enumerate(obj):
        print(f"account {index+1} name: {x.name} \nBalance: {x.balance}")

object_info(objects)
print(len(objects))


for i in range(len(objects)):
    objects[i].deposit(1000)

save_object(filename, objects)

objects = load_object('objects.pkl')
object_info(objects)
